<h2 class="text-center">Users</h2>
<br />
<%= render "shared/left_nav"%>
<div class="col-md-8 pull-right">
  <%= link_to "Add New User", new_user_path, class: "btn btn-primary btn-block" %>
  <br />
  <table class="table">
    <tr>
      <th class="col-md-1">ID</th>
      <th class="col-md-1">Name</th>
      <th class="col-md-1">Joined</th>
      <th class="col-md-1">City</th>
      <th class="col-md-1">State</th>
      <th class="col-md-1">Orders</th>
      <th class="col-md-1">Order Date</th>
      <th class="col-md-1">Show</th>
      <th class="col-md-1">Edit</th>
      <th class="col-md-1">Delete</th>
    </tr>
  <% @users.each do |user| %>
    <tr>
      <td class="col-md-1"><%= user.id %></td>
      <td class="col-md-1"><%= user.first_name + " " + user.last_name %></td>
      <td class="col-md-1"><%= user.created_at.strftime('%v') %></td>
      <% if user.addresses.first %>
      <td class="col-md-1"><%= user.addresses.first.city.name %></td>
      <td class="col-md-1"><%= user.addresses.first.state.name %></td>
      <% end %>
      <td class="col-md-1"><%= link_to user.orders.count, "#" %></td>
      <td class="col-md-1"><%= user.orders.first.created_at.strftime('%v') if user.orders.first %></td>
      <td class="col-md-1"><%= link_to "Show", user_path(user) %></td>
      <td class="col-md-1"><%= link_to "Edit", edit_user_path(user) %></td>
      <td class="col-md-1"><%= link_to "Delete", user, method: :delete, data: { confirm: "Are you sure?" } %></td>
    </tr>
 <% end %>
  </table>
</div>
