<%= form_for @user do |user_fields| %>

  <%= user_fields.label :email %>
  <%= user_fields.email_field :email %>
  <br>
  <%= user_fields.label :first_name %>
  <%= user_fields.text_field :first_name %>
  <br>
  <%= user_fields.label :last_name %>
  <%= user_fields.text_field :last_name %>
  <br>
  <%= user_fields.fields_for :address, Address.new do |address_fields| %>
    
    <%= address_fields.label :street_address %>
    <%= address_fields.text_field :street_address %>
    <br>
    <%= address_fields.label :city_id %>
    <%= address_fields.text_field :city_id %>
    <br>
    <%= address_fields.label :state_id %>
    <%= address_fields.collection_select :state_id, State.all, :id, :name, { prompt: "State" } %>
    <br>
    <%= address_fields.label :zip_code %>
    <%= address_fields.text_field :zip_code %>
    
  <% end %>

  <br>
  <%= user_fields.submit %>

<% end %>