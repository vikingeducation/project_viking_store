<div class="col-md-5 border ml-md-auto">

  <h2 class="text-center text-primary mt-4">2. User Demographics and Behavior</h2>

  <!-- Top 3 States that Users live in by billing address -->
  <h4 class="text-left text-secondary mt-4">Top 3 States Users Live In (Billing)</h4>
  <table class="table table-striped mt-4">
    <thead class="table-inverse">
      <tr>
        <td>State</td>
        <td>Count</td>
      </tr>
    </thead>

    <tbody>
      <% locals[:top_3_states_by_billing_address].each do |state| %>
        <tr>
          <td><%= state.name %></td>
          <td><%= state.count %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- Top 3 Cities that Users live in by billing address -->
  <h4 class="text-left text-secondary mt-4">Top 3 Cities Users Live In (Billing)</h4>
  <table class="table table-striped mt-4">
    <thead class="table-inverse">
      <tr>
        <td>City</td>
        <td>Count</td>
      </tr>
    </thead>

    <tbody>
      <% locals[:top_3_cities_by_billing_address].each do |city| %>
        <tr>
          <td><%= city.name %></td>
          <td><%= city.count %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- Best Customers -->
  <h4 class="text-left text-secondary mt-4">Top User With..</h4>
  <table class="table table-striped mt-4">
    <thead class="table-inverse">
      <tr>
        <td>Criteria</td>
        <td>Customer Name</td>
        <td>Quantity</td>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>Highest Single Order Value</td>
        <td><%= "#{locals[:user_with_highest_single_order_value].first_name} #{locals[:user_with_highest_single_order_value].last_name}" %></td>
        <td><%= number_to_currency(locals[:user_with_highest_single_order_value].revenue) %></td>
      </tr>
      <tr>
        <td>Highest Lifetime Value</td>
        <td><%= "#{locals[:user_with_highest_lifetime_value].first_name} #{locals[:user_with_highest_lifetime_value].last_name}" %></td>
        <td><%= number_to_currency(locals[:user_with_highest_lifetime_value].revenue) %></td>
      </tr>
      <tr>
        <td>Highest Average Order Value</td>
        <td><%= "#{locals[:user_with_highest_average_order_value].first_name} #{locals[:user_with_highest_average_order_value].last_name}" %></td>
        <td><%= number_to_currency(locals[:user_with_highest_average_order_value].average_order_value) %>
      </tr>
      <tr>
        <td>Most Orders Placed</td>
        <td><%= "#{locals[:user_with_most_orders_placed].first_name} #{locals[:user_with_most_orders_placed].last_name}" %></td>
        <td><%= locals[:user_with_most_orders_placed].order_count %></td>
      </tr>
    </tbody>
  </table>
</div>
